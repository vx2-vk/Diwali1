<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Diwali!</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap');

        body {
            font-family: 'Dancing Script', cursive;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(to bottom, #0a0a0a, #2c003e); /* Dark, spiritual background */
            color: #fff;
            text-align: center;
            overflow: hidden; /* For fireworks */
            padding: 20px;
            box-sizing: border-box; /* Include padding in element's total width and height */
        }

        .container {
            background-color: rgba(0, 0, 0, 0.6);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(255, 165, 0, 0.7); /* Glowing effect */
            max-width: 500px;
            width: 100%;
            box-sizing: border-box;
            position: relative;
            z-index: 10; /* Ensure content is above fireworks */
        }

        img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin-bottom: 25px;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
            animation: fadeIn 2s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        h1 {
            font-size: 2.8em;
            color: #ffe082; /* Golden glow */
            text-shadow: 0 0 10px #ffcc00, 0 0 20px #ffaa00;
            margin-bottom: 20px;
            animation: pulseGlow 1.5s infinite alternate;
        }

        @keyframes pulseGlow {
            from { text-shadow: 0 0 10px #ffcc00, 0 0 20px #ffaa00; }
            to { text-shadow: 0 0 15px #ffcc00, 0 0 25px #ffaa00, 0 0 35px #ffaa00; }
        }

        p {
            color: #e0e0e0;
            margin-bottom: 25px;
            font-size: 1.1em;
        }

        input[type="text"] {
            width: calc(100% - 24px);
            padding: 12px;
            margin-bottom: 20px;
            border: 2px solid #ffcc00;
            border-radius: 8px;
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 1.1em;
            outline: none;
            box-shadow: 0 0 8px rgba(255, 165, 0, 0.5);
            transition: all 0.3s ease;
        }

        input[type="text"]::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        input[type="text"]:focus {
            background-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 12px rgba(255, 165, 0, 0.8);
        }

        button {
            background-color: #ff6600;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        button:hover {
            background-color: #e65c00;
            transform: translateY(-2px);
        }

        .share-link-container {
            margin-top: 30px;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            border: 1px dashed #ffcc00;
            display: none; /* Hidden by default */
            word-break: break-all;
            box-shadow: inset 0 0 10px rgba(255, 165, 0, 0.3);
        }

        #generatedLink {
            font-size: 1em;
            color: #aaffaa;
            margin-bottom: 15px;
            display: block;
            background-color: rgba(0, 0, 0, 0.3);
            padding: 8px;
            border-radius: 5px;
            text-shadow: 0 0 5px rgba(170, 255, 170, 0.5);
        }

        .whatsapp-button {
            display: inline-flex;
            align-items: center;
            background-color: #25D366;
            margin-top: 15px;
            padding: 10px 20px;
            font-size: 1em;
        }

        .whatsapp-button img {
            width: 24px;
            height: 24px;
            margin-right: 8px;
            border-radius: 0; /* Override img border-radius */
            box-shadow: none; /* Override img box-shadow */
            animation: none; /* Override img animation */
        }

        /* Fireworks container */
        .fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1; /* Below content */
            overflow: hidden;
        }

        /* Firework particle styles (basic) */
        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            background-color: white;
            border-radius: 50%;
            opacity: 0;
            animation: fireworkExplode 1s forwards ease-out;
        }

        @keyframes fireworkExplode {
            0% { transform: scale(0); opacity: 1; }
            20% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0); opacity: 0; }
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 2em;
            }
            .container {
                padding: 20px;
            }
            input[type="text"], button {
                font-size: 1em;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="fireworks" id="fireworksContainer"></div>

    <div class="container">
        <img src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExdDA1eXl0MmxydDJlZmFjZGYxOGF4aXAxY2U3OGJieG1kMHBjbzMwbSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/ErwOniUoUCjUCteUln/giphy.gif" alt="Goddess Laxmi">
        <h1 id="headline">Happy Diwali</h1>
        <p id="subMessage">Apna naam likhkar apne dosto ko Diwali ki shubhkamnayein bhejen!</p>

        <div id="inputSection">
            <input type="text" id="userName" placeholder="Apna naam likhen">
            <button onclick="generateLink()">OK</button>
        </div>

        <div id="shareLinkSection" class="share-link-container">
            <p>Apna link yahan se copy karen:</p>
            <strong id="generatedLink"></strong>
            <button class="whatsapp-button" onclick="shareViaWhatsApp()">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/1200px-WhatsApp.svg.png" alt="WhatsApp"> Share on WhatsApp
            </button>
        </div>
    </div>

    <script>
        const headline = document.getElementById('headline');
        const subMessage = document.getElementById('subMessage');
        const userNameInput = document.getElementById('userName');
        const shareLinkSection = document.getElementById('shareLinkSection');
        const generatedLinkElement = document.getElementById('generatedLink');
        const fireworksContainer = document.getElementById('fireworksContainer');

        // Function to generate random color
        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        // Function to create a single firework
        function createFirework(x, y) {
            const colors = ['#FFD700', '#FF4500', '#ADFF2F', '#1E90FF', '#BA55D3']; // Gold, OrangeRed, GreenYellow, DodgerBlue, MediumPurple
            const numParticles = 30; // Number of particles per firework
            const explosionRadius = 80;

            for (let i = 0; i < numParticles; i++) {
                const particle = document.createElement('div');
                particle.className = 'firework';
                particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                fireworksContainer.appendChild(particle);

                // Initial position
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;

                // Random target position for explosion
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * explosionRadius;
                const targetX = x + distance * Math.cos(angle);
                const targetY = y + distance * Math.sin(angle);

                particle.animate([
                    { transform: `translate(0, 0)`, opacity: 1, boxShadow: `0 0 10px ${particle.style.backgroundColor}` },
                    { transform: `translate(${targetX - x}px, ${targetY - y}px)`, opacity: 0, boxShadow: `0 0 0px transparent` }
                ], {
                    duration: 1000,
                    easing: 'ease-out',
                    fill: 'forwards'
                });

                // Remove particle after animation
                particle.addEventListener('animationend', () => particle.remove());
            }
        }

        // Function to trigger multiple fireworks
        function triggerFireworks() {
            const numFireworks = Math.floor(Math.random() * 3) + 3; // 3 to 5 fireworks
            for (let i = 0; i < numFireworks; i++) {
                setTimeout(() => {
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight * 0.7; // Avoid bottom of screen
                    createFirework(x, y);
                }, i * 200); // Stagger them slightly
            }
        }

        // Initialize fireworks on page load and repeat
        document.addEventListener('DOMContentLoaded', () => {
            triggerFireworks(); // Initial burst
            setInterval(triggerFireworks, 3000); // Repeat every 3 seconds

            const params = new URLSearchParams(window.location.search);
            const senderName = params.get('from');

            if (senderName) {
                const decodedName = decodeURIComponent(senderName);
                headline.textContent = `Happy Diwali from ${decodedName}`;
                subMessage.textContent = `Aapko ${decodedName} ne Diwali ki shubhkamnayein bheji hain! Ab aap bhi apni shubhkamnayein bhejen.`;
                // Keep the input and share section visible
            } else {
                headline.textContent = 'Happy Diwali';
                subMessage.textContent = 'Apna naam likhkar apne dosto ko Diwali ki shubhkamnayein bhejen!';
            }
        });

        function generateLink() {
            const userName = userNameInput.value.trim();
            if (userName) {
                const currentUrl = window.location.origin + window.location.pathname;
                const link = `${currentUrl}?from=${encodeURIComponent(userName)}`;
                generatedLinkElement.textContent = link;
                shareLinkSection.style.display = 'block'; // Show the share section
            } else {
                alert('Kripya apna naam likhen!');
            }
        }

        function shareViaWhatsApp() {
            const linkToShare = generatedLinkElement.textContent;
            const textMessage = `Happy Diwali! Wishing you and your family a joyous celebration. Open this link to see my special greeting: ${linkToShare}`;

            // Check if navigator.share is available (for mobile devices)
            if (navigator.share) {
                navigator.share({
                    title: 'Happy Diwali!',
                    text: textMessage,
                    url: linkToShare
                }).then(() => {
                    console.log('Successfully shared');
                }).catch((error) => {
                    console.error('Error sharing:', error);
                    // Fallback to WhatsApp URL if native share fails or not supported
                    window.open(`https://wa.me/?text=${encodeURIComponent(textMessage)}`, '_blank');
                });
            } else {
                // Fallback for desktop or unsupported browsers
                window.open(`https://wa.me/?text=${encodeURIComponent(textMessage)}`, '_blank');
            }
        }
    </script>
</body>
</html>
